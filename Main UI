-- Notifications for Loading
game:GetService("StarterGui"):SetCore("SendNotification", { 
    Title = "Please wait for it";
    Text = "Loading scripts...";
    Icon = "rbxthumb://type=Asset&id=5107182114&w=150&h=150"})
Duration = 30;

game:GetService("StarterGui"):SetCore("SendNotification", { 
    Title = "External Z Hub";
    Text = "Version 5.0 Loaded!";
    Icon = "rbxthumb://type=Asset&id=5107182114&w=150&h=150"})
Duration = 30;

-- Load UI Library
local DrRayLibrary = loadstring(game:HttpGet("https://raw.githubusercontent.com/AZYsGithub/DrRay-UI-Library/main/DrRay.lua"))()
local window = DrRayLibrary:Load("External Z Hub V5.0", "Default")

-- CREDITS TAB
local creditsTab = DrRayLibrary.newTab("Credits", "rbxassetid://5107182114")
creditsTab.newLabel("Hub Creator: uniqve")
creditsTab.newLabel("Script Tester: qweiringss")
creditsTab.newLabel("UI Design: DrRay Library")
creditsTab.newLabel("Special Thanks: AZYsGithub")
creditsTab.newLabel("Version: 5.0 Updated")
creditsTab.newLabel("Additional Credits: External Z Hub Community")

-- TOOLS TAB
local toolsTab = DrRayLibrary.newTab("Tools", "rbxassetid://10568570622")

toolsTab.newLabel("Performance Tools")
toolsTab.newButton("FPS Booster", "Improves game performance", function()
    setfpscap(1000)
end)

toolsTab.newButton("Anti-AFK", "Prevents being kicked", function()
    local vu = game:GetService("VirtualUser")
    game:GetService("Players").LocalPlayer.Idled:connect(function()
        vu:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
        wait(1)
        vu:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
    end)
end)

toolsTab.newLabel("Fun Tools")
toolsTab.newButton("Fake Lag", "Fake lag effect", function()
    loadstring(game:HttpGet("https://pastebin.com/raw/FakeLagExample"))()
end)

toolsTab.newButton("Chat Spy", "Spy on private chats", function()
    loadstring(game:HttpGet("https://scriptblox.com/raw/Universal-Script-Chat-Spy-Script-2104"))()
end)

toolsTab.newButton("Roast GUI", "Auto roast players", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/Sjskdnsidjskfn/Roast-gui-UPDATED-Version-/main/Roast%20gui%20(UPDATED%20Version)"))()
end)

toolsTab.newButton("Fling GUI", "Fling players", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/0Ben1/fe./main/Fling%20GUI"))()
end)

-- GAMES TAB 1 (Expanded)
local tab1 = DrRayLibrary.newTab("Games Tab 1", "rbxassetid://10568529149")

tab1.newButton("Arsenal", "Shooter Game Script", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/StupidProAArsenal/UniqueHub/main/arsenal"))()
end)

tab1.newButton("Bloxburg", "House Building Game", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/SurgeDid/Blockburg/main/loader.lua"))()
end)

tab1.newButton("Tower of Hell", "Parkour Challenge", function()
    loadstring(game:HttpGet("https://rawscripts.net/raw/Tower-of-Hell-STARRY-OP-25216"))()
end)

tab1.newButton("Jailbreak", "Heist Adventure", function()
    loadstring(game:HttpGet("https://rawscripts.net/raw/Jailbreak-BEST-OP-SCRIPT-18726"))()
end)

tab1.newButton("Shindo Life", "Anime RPG Script", function()
    loadstring(game:HttpGet("https://rawscripts.net/raw/UPDATE-Shindo-Life-Premier-X-Free-Version-3237"))()
end)

tab1.newButton("Funky Friday", "Rhythm Game Script", function()
    loadstring(game:HttpGet("https://rawscripts.net/raw/Autoplayer_278"))()
end)

tab1.newButton("Combat Warriors", "Combat Battle", function()
    loadstring(game:HttpGet("https://rawscripts.net/raw/EVENT-UPDCombat-Warriors-25240"))()
end)

tab1.newButton("Blade Ball", "PVP Battle Script", function()
    loadstring(game:HttpGet(‘https://raw.githubusercontent.com/No6No6No7yt/Lumin-Hub/main/BladeV4.lua’))();
end)

-- NEW GAMES TAB 2
local tab2 = DrRayLibrary.newTab("Games Tab 2", "rbxassetid://10568570622")

tab2.newButton("Anime Fighting Simulator", "Anime Battle Game", function()
    loadstring(game:HttpGet("https://rawscripts.net/raw/Anime-Fighting-Simulator-Script-23562"))()
end)

tab2.newButton("Murder Mystery 2", "Murder Mystery Game", function()
    loadstring(game:HttpGet("https://rawscripts.net/raw/Murder-Mystery-2-Script-22143"))()
end)

tab2.newButton("Bee Swarm Simulator", "Bee Farming Game", function()
    loadstring(game:HttpGet("https://rawscripts.net/raw/Bee-Swarm-Simulator-Script-22651"))()
end)

-- SEARCH TAB
local searchTab = DrRayLibrary.newTab("Search", "rbxassetid://10568570622")
local scriptButton -- This will hold the search result button

searchTab.newInput("Search", "Enter game or script name", function(search)
    -- Remove existing search result button if it exists
    if scriptButton then
        scriptButton:Destroy()
    end

    -- Normalize the search term to lowercase for case-insensitive matching
    search = search:lower()

    -- Search logic for scripts based on the input
    local searchResult = {
        ["arsenal"] = "https://raw.githubusercontent.com/StupidProAArsenal/UniqueHub/main/arsenal",
        ["bloxburg"] = "https://raw.githubusercontent.com/SurgeDid/Blockburg/main/loader.lua",
        ["tower of hell"] = "https://rawscripts.net/raw/Tower-of-Hell-STARRY-OP-25216",
        ["jailbreak"] = "https://rawscripts.net/raw/Jailbreak-BEST-OP-SCRIPT-18726",
        ["shindo life"] = "https://rawscripts.net/raw/UPDATE-Shindo-Life-Premier-X-Free-Version-3237",
        ["funky friday"] = "https://rawscripts.net/raw/Autoplayer_278",
        ["combat warriors"] = "https://rawscripts.net/raw/EVENT-UPDCombat-Warriors-25240",
        ["blade ball"] = "https://raw.githubusercontent.com/No6No6No7yt/Lumin-Hub/main/BladeV4.lua",
        ["anime fighting simulator"] = "https://rawscripts.net/raw/Anime-Fighting-Simulator-Script-23562",
        ["murder mystery 2"] = "https://rawscripts.net/raw/Murder-Mystery-2-Script-22143",
        ["bee swarm simulator"] = "https://rawscripts.net/raw/Bee-Swarm-Simulator-Script-22651"
    }

    local matchingResults = {}

    -- Check for partial matches
    for game, scriptLink in pairs(searchResult) do
        if game:find(search, 1, true) then
            table.insert(matchingResults, {game = game, scriptLink = scriptLink})
        end
    end

    if #matchingResults > 0 then
        -- Display all matching results
        for _, result in pairs(matchingResults) do
            -- Remove existing search result button if any
            if scriptButton then
                scriptButton:Destroy()
            end
            
            scriptButton = searchTab.newButton(result.game, "Click to execute the script", function()
                print("Executing script for: " .. result.game) -- Debugging line

                -- Try loading the script
                local success, err = pcall(function()
                    loadstring(game:HttpGet(result.scriptLink))()
                end)

                if success then
                    -- Remove the button after script execution
                    scriptButton:Destroy()

                    -- Optionally show a message when the script is executed
                    game:GetService("StarterGui"):SetCore("SendNotification", { 
                        Title = "Script Executed";
                        Text = "The script for '"..result.game.."' has been executed!";
                        Icon = "rbxthumb://type=Asset&id=5107182114&w=150&h=150";
                        Duration = 5;
                    })
                else
                    -- If there's an error, print it and show a notification
                    print("Error executing script: " .. err)
                    game:GetService("StarterGui"):SetCore("SendNotification", { 
                        Title = "Script Error";
                        Text = "An error occurred while executing the script. Please check the output.";
                        Icon = "rbxthumb://type=Asset&id=5107182114&w=150&h=150";
                        Duration = 5;
                    })
                end
            end)
        end
    else
        -- Show a specific notification if no matches were found
        game:GetService("StarterGui"):SetCore("SendNotification", { 
            Title = "No Results Found";
            Text = "No scripts matched your search for '"..search.."'. Try another term.";
            Icon = "rbxthumb://type=Asset&id=5107182114&w=150&h=150";
            Duration = 5;
        })
    end
end)
